<img src="http://febret.github.io/firefly/screenshot.png" width = 500/>

Firefly is a visualization app for simulations generated by the FIRE galaxy formation simulation (http://galaxies.northwestern.edu/fire-simulations/)

The code is in python and runs using the Omegalib toolkit (https://github.com/uic-evl/omegalib)

To run firefly (after installing or building Omegalib) type
```
> orun firefly.py
```

### Installation Notes ###
To use firefly, install Omegalib with point cloud support. You can enable this in the installer or using the omegalib maintenance tools (see https://github.com/uic-evl/omegalib/wiki/Building#installing-modules)

### Data Preparation ###
firefly reads point cloud data from binary point cloud files (extension `.xyzb`). FIRE generated HDF5 files. To convert the HDF5 file to binary point cloud files you can use the included preprocess.py script. To run it, you will need **h5py installed** to read the HDF5 file in python.

#### Installing H5PY ####
Instructions for each operating system can be found here: http://docs.h5py.org/en/latest/build.html

In particular, do the following to install on OSX:
```
(If you do not have homebrew)> ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

>brew install homebrew/science/hdf5

(If you do not have pip installed)> sudo easy_install pip
>sudo pip install h5py
```

#### Preprocessing the HDF5 Data ####
Copy your file in the firefly directory and edit preprocess.py line 48:
```
f = h5py.File('FILE NAME HERE,'r')
```
You can optionally the `extractPart` lines to change what data is extracted from the file. At the end of the preprocessing step (it will take a few minutes) you should have a set of files (`data_0.xyzb`, `data_1.xyzb` etc.) in the firefly directory. 

You can now run firefly with `orun firefly.py`

### Application controls ###
- **A** pan left
- **D** pan right
- **W** move forward
- **S** move backward
- **R** pan up
- **F** pan down
- **Mouse drag** rotate view around data center


